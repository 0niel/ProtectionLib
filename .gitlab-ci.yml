image: maven:3-jdk-8

stages:
- build
- tag
- deploy

ProtectionLib:
  stage: build
  script:
     - mvn clean package
  artifacts:
     paths:
     - target/*.jar
  only:
    - master
  
ProtectionLib-repo:
  stage: deploy
  script:
    - echo "Deploy to staging server"
  environment:
    name: staging
    url: https://staging.example.com
  artifacts:
    paths:
    - target/staging
  only:
  - master